### 배포 - 인도 자동화의 중요성

- 전통적 인도 프로세스의 한계점
    - 느린 인도 기간 ⇒ 요구사항 정의 - 제품 전달까지 긴 시간
    - 느린 피드백 주기 ⇒ 효율적이지 않음
    - 자동화 미비 ⇒ 릴리스 기간 예측 어려움
    - 핫픽스 위험성 ⇒ 긴급한 코드 변경 미비한 테스트 위험
    - 개발문화 건전성 제한 ⇒ 낮은 업무 만족도

⇒ 프로세스 각 단계를 자동화

- 빠른 제품 인도
- 짧은 피드백 주기
- 위험도가 낮은 릴리스 ( 반복과 롤백 )
- 융녀한 릴리스 정책 결정 가능
- 지속적 통합 ( CI : Contrinuous Integration )
    - 코드가 올바르게 빌드 및 통합되는지를 자동으로 확인
    - 리포지토리에서 코드를 체크아웃
    - 빌드를 수행하고 단위테스트
    - 코드 품질 검증
- CD를 위한 기술적 전제 조건
    - 자동 빌드, 테스트, 패키징, 배포
    - 신속한 파이프라인 실행
    - 신고한 장애 복구
    - 무중단 배포
    - 트렁크 기반 개발

### 컨테이너 가상화와 도커

- 가상화 (Virtulalization)
    - 컴퓨팅의 추상화 자원을 일컫는 용어
- 가상화의 이점
    - 시스템 이용률 향상, 설정 구성과 복원 용이
    - 자본 및 운영 비용 절감, 다운타임 최소화
    - 소프트웨어의 배포, 테스트, 구성 관리 등에 통일된 환경을 제공할 수 있음
    - 소프트웨어 통합-인도 프로세스의 자동화에 적용하기 좋음
- 서버 가상화 기술의 진화
    - 가상 기계 (VM : Virtual Machine) 기반
    - 컨테이너 기반
- 컨테이너 가상화
    - 컨테이너 엔진이 가상의 런타임 환경을 제공
    - 각각의 응용 소프트웨어는 격리된 환경에서 실행
    - 컨테이너가 모사하는 대상은 하드웨어가 아니고 운영체제 ⇒ 하이퍼 바이저를 이용하는 가상화에 비하여 가볍고 빠르다
- 컨테이너 사용의 이점
    - 가상기계 (VM)의 대체 또는 보완 방식으로 각광 받는 중
    - 소프트웨어 개발 및 배포의 효율과 안정성 향상
    - 응용 프로그램, 설정파일, 라이브러리, 이들 간 의존성 관계를 “컨테이너” 라고 부른다

### 도커 이미지와 도커 컨테이너

- 도커 이미지
    - 응용을 실행하는데 필요한 모든 파일과 그것을 실행하는 방법을 묶어 놓은 것
    - 계층화되어 있다는 특징을 갖고 있으며, 어떤 이미지로부터 다른 이미지 생성이 가능
- 도커 컨테이너
    - 이미지의 실행 인스턴스
    - 하나의 이미지로부터 여러 컨테이너를 만들어 동일한 응용을 여러개 실행 가능(각각 독립)
    - 상태를 저장하는 방식(컨테이너 사용시 상태 변경) ⇒ 컨테이너 소멸시 상태도 소멸
    
    | docker run <이미지 이름> | 이름이 주어진 이미지를 로컬에서 또는 레지스트리에서 가져다가 컨테이너를 만들어 실행 |
    | --- | --- |
    | docker ps, docker ps -a | 현재 실행 중인 컨테이너들의 정보를 조회 |
    | docker images | 로컬 컴퓨터에 가지고 있는 이미지 정보를 조회 |
    | docker stop | 현재 실행 중 컨테이너 실행을 중단 |
    | docker rm | 컨테이너 삭제 |
    | docker rmi | 이미지를 삭제 |

### 이미지 생성 자동화

- Dockerfile
    - 계층 구조를 이용하여 도커 이미지를 만드는 절차를 기술하는 파일
    - FROM [—platform=<platform>]<image>[AS<name>]
    - RUN<command>
    - ENTRYPOINT[”executable”,”param1”,”param2”]
- 이미지 빌드 명령어
    - docker build [OPTIONS] PATH | URL |

### 컨테이너 다루기

### 컨테이너 안의 파일들과 도커 볼륨

- 실행하고 있는 컨테이너와 호스트 사이의 파일 복사
    - docker cp 이용
- 이미지 빌드를 할 때 호스트로부터 파일을 컨테이너에 추가
    - Dokcerfile 안에 ADD 지시자를 활용
- 바인드 마운트
    - docker -v 옵션으로 호스트의 특정디렉토리를 컨테이너와 공유
    
    > docker run -v<호스트 경로>:<컨테이너 경로><이미지>
    > 
- 도커 볼륨
    - docker -v 옵션으로 호스트와 공유하는 것은 비슷하지만 컨테이너가 마운트 하는 것은 추상화된 볼륨