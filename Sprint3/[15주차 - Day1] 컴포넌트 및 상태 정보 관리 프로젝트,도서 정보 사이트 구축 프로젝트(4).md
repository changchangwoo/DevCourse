## 도서 상세 페이지 구현

### 얼리 리턴 패턴

- 코드 작성 시 조건이 만족되면 함수를 조기에 종료 시키는 프로그래밍 기법
- 가독성 향상 및 유지보수 용이, 효율성 증대 효과

```jsx
 const addToCart = (quantity: number) => {
    if (!book) return;
    addCart({
      book_id: book.id,
      quantity: quantity,
    }).then(() => {
      showAlert("장바구니에 추가되었습니다.");
      setCartAdded(true);
      setTimeout(() => {
        setCartAdded(false);
      }, 3000);
    });
  };
```

### 낙관적 업데이트

- 사용자 경험을 향상시키기 위해 주로 사용되는 기술
- UI 인터페이스를 서버에 응답을 받기 전에 즉시 업데이트하고 이후 결과를 반영하는 기법
- 서버로부터 요청-응답을 기다리지 않아 사용자 경험 향상
- 사용자 동작 - UI 업데이트 - 서버 응답 성공시 실제 업데이트 - 실패시 업데이트 롤백

```jsx
  const likeToggle = () => {
    if (!isloggedIn) {
      showAlert("로그인이 필요합니다.");
      return;
    }
    if (!book) return;
    if (book.liked) {
      // 라잌 상태 => 언 라잌 실행
      unlikeBook(book.id).then(() => {
        setBook({
          ...book,
          liked: false,
          likes: book.likes - 1,
        });
      });
    } else {
      // 언 라잌 상태 => 라잌 실행
      likeBook(book.id).then(() => {
        // 성공 처리
        setBook({
          ...book,
          liked: true,
          likes: book.likes + 1,
        });
      });
    }
  };
```

- 보통 다음과 같이 좋아요 등 서버에 대한 응답이 중요하지 않은 기능을 수행할 때 자주 사용
- 요청을 하고 응답을 받고 응답을 반영하기 전에 우선 UI부터 반영

### 커스텀 컴포넌트로 접근하는 스타일 컴포넌트

```jsx
const LikeButton = ({ book, onClick }: Props) => {
  return (
    <div>
      <LikeButtonStyle size="medium" 
      scheme={book.liked ? "like" : "normal"}
      onClick={onClick}>
        <FaHeart />
        {book.likes}
      </LikeButtonStyle>
    </div>
  );
};

const LikeButtonStyle = styled(Button)`
  display: flex;
  gap: 6px;

  svg {
    color: inherit;
    * {
      color: inherit;
    }
  }
`;
```

- Button은 사용자 정의 컴포넌트이다. 스타일드 컴포넌트는 이미 정의된 컴포넌트에 래핑하여 스타일을 추가로 적용할 수 있다
- Button의 원래 스타일을 유지하면서, 내부적으로 추가 스타일링을 구현할 수 있다
- 결국엔 커스텀 컴포넌트의 가장 상위요소로 스타일이 추가된다고 보면된다

### 아이콘 스타일 처리

- 아이콘을 사용할 때 주로 리액트 아이콘 라이브러리를 사용하는데 해당하는 파일들은 svg 파일이다.

```
  svg {
    color: inherit;
    * {
      color: inherit;
    }
  }
```

- 다음과 같이 svg로 아이콘 이미지 내부 스타일링 에 접근할 수 있다

```jsx
    svg {
        transform: ${({$expanded}) =>
        ($expanded ? "rotate(180deg)" : "rotate(0deg)")};
    }
```

- 이렇게 접기/펼치기 같이 아이콘을 돌려야하는 경우 이런식으로 활용하는방법도 있었다